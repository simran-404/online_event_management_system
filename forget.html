<html> 
  <head>
    <style>
      .input-group {
        position: relative;
        display: flex;
        align-items: center;
      }

      .input-group input {
        width: 100%;
        padding-right: 40px; /* Leave space for the eye icon */
      }

      .toggle-password {
        position: absolute;
        right: 10px;
        cursor: pointer;
      }
      .x-container {
        display: flex; 
        gap: 10px;       
      }
    </style>

    <link href="./assets/css/fonts.css" rel="stylesheet" />
    <link href="./assets/css/index.css" rel="stylesheet" />
    <title>Forget Page</title>
  </head>

  <body>
    <div class="container">
      <div class="left">
        <div class="content">
          <span>Welcome</span>
          <h1>Let's Bring Your Event Vision to Life</h1>
          <p>
            Our platform helps you plan and manage events easily. From registration to schedules, everthing in one place. Whether it's a birthday, wedding or corporate party, we make event management hassle-free!
          </p>
          <div class="x-container">
            <button class="form-btn"><a href="registration.html">Register</a></button>
            <button class="form-btn"><a href="login.html">Login</a></button>
          </div>
        </div>
      </div>

      <div class="right">
        <div class="form">
          <h2>Reset Password</h2>
          <p id="message"></p>
          <form method="POST" action="forget.php">
            <div class="input-group">
              <input type="text" id="username" name="username" required placeholder="Username" />
            </div>
            <div class="input-group">
              <input
                  type="password"
                  id="password"
                  name="password"
                  placeholder="Enter new password*"
                  required
                  pattern="^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[@$!%*?&]).{8,}$"
                  title="Password must be at least 8 characters long and include at least one uppercase letter, one lowercase letter, one number, and one special character."
                />
                <span class="toggle-password" onclick="togglePassword('password', this)">
                  <img src="assets/img/closeeye.webp" height="30">
                </span>
            </div>
            <div class="input-group">
              <input
                  type="password"
                  id="confirm_password"
                  name="confirm_password"
                  placeholder="Re-enter password*"
                  required
                  pattern="^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[@$!%*?&]).{8,}$"
                  title="Password must be at least 8 characters long and include at least one uppercase letter, one lowercase letter, one number, and one special character." 
                />
                <span class="toggle-password" onclick="togglePassword('confirm_password', this)">
                  <img src="assets/img/closeeye.webp" height="30">
                </span>
            </div>
            <button type="submit" class="form-btn">Reset Password</button>
          </form>
        </div>
      </div>
    </div>
  </body>

  <script defer>
    function togglePassword(fieldId, eyeIcon) {
  var passwordField = document.getElementById(fieldId);
  
  if (passwordField.type === "password") {
    passwordField.type = "text";
    eyeIcon.children[0].src = "assets/img/eye.png"; // Change icon to indicate visibility
  } else {
    passwordField.type = "password";
    eyeIcon.children[0].src = "assets/img/closeeye.webp"; // Revert to hidden state icon
  }
}

    // Show error or success message received from backend through URL
    const searchParams = new URLSearchParams(window.location.search);
    const msg = searchParams.get("message");
    const status = searchParams.get("status") || "error";
    if (msg) {
      const messageEl = document.getElementById("message");
      messageEl.textContent = msg;
      messageEl.className = status;
    }
  </script>
</html>
